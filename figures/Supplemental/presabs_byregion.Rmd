---
title: "Region PresAbs Species Figure"
output: html_notebook
---

```{r setup}
library(data.table)
library(ggplot2)
library(here)
spp_master_ztemp_seus_buoy <- readRDS(here::here("Data","Spp_master", "spp_master_ztemp_seus_buoy.rds")) #load in processed presence/absence data
```

Link up with spp key to add phylum, order, family, etc.
```{r pull in spp, order, family, etc.}
spp_key <- fread(here::here("Data","Spp_master","spp_key.csv"))

spp_master_ztemp_seus_buoy <- spp_master_ztemp_seus_buoy[spp_key, on = "spp"]

    
```

```{r data setup}
#rename region factors for plotting
spp_master_ztemp_seus_buoy[, region := factor(reg, labels = c("Aleutian Islands", "Eastern Bering Sea", "Gulf of Mexico", "Gulf of Alaska", "Northeast US", "Newfoundland","Southeast US","Scotian Shelf" ,"West Coast US"))]

#make spp a factor
spp_master_ztemp_seus_buoy[, spp := factor(spp)]
#reverse order for plotting
spp_master_ztemp_seus_buoy[, spp := factor(spp, levels = rev(levels(spp)))]


ggplot(spp_master_ztemp_seus_buoy, aes(as.factor(year), as.factor(spp))) + 
  geom_tile(aes(fill = factor(present)), color = "grey", size = 0.01) +
  facet_wrap(~region, scales="free") +
  scale_fill_manual(values = c("white", "black"), breaks = c(0,1), labels = c("Absent", "Present")) +
  labs(x = "Year", y = "Species") +
  theme(legend.title = element_blank(),
        axis.text.y = element_text(size = 0.8),
        axis.text.x = element_text(size = 5, angle = 90, vjust = 0.5),
        strip.text.x = element_text(size = 10),
        axis.ticks = element_blank())


ggsave("S3_region_presabs.eps", width = 10, height = 8, units = "in", path=here::here("figures","Supplemental"))
ggsave("S3_region_presabs.jpg", width = 10, height = 8, units = "in", path=here::here("figures","Supplemental"))

```
