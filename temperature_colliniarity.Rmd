---
title: "Temp Collinearity"
output: html_notebook
---

Looking at collinearity between temperature predictors. 

```{r setup}
library(data.table)
library(ggplot2)
library(reshape2)
library(ggcorrplot)


load("spp_master_ztemp_seus_buoys.Rdata")
```


```{r narrow down to variables that we need}
#columns to keep for collinearity matrix
variable_names_reduced <- colnames(spp_master_ztemp_seus_buoy)[grepl("s.t", colnames(spp_master_ztemp_seus_buoy),)]
variable_names_reduced2 <- variable_names_reduced[!grepl("mean|lag", variable_names_reduced)]

#now, using this list reduce dt
temperature_nolags <- spp_master_ztemp_seus_buoy[,..variable_names_reduced2]

#all variable names for a big collinarity matrix
variable_names_all <- variable_names_reduced[!grepl("mean", variable_names_reduced)]

#now, using this list reduce dt
temperature_withlags <- spp_master_ztemp_seus_buoy[,..variable_names_all]


```

Correlation Matrix
```{r matrix all}
corr_full <- round(cor(temperature_withlags), 2)

ggcorrplot(corr_full, outline.color = "white", tl.cex = 1, tl.srt = 90, lab_size = 30)
ggsave(file = "temp_var_correlation_plot.jpg", dpi = 1000)

# Get the lower triangle
ggcorrplot(corr_full, type = "lower", outline.col = "white", tl.cex = 1, tl.srt = 90)
ggsave(file = "temp_var_correlation_plot_lower.jpg", dpi = 1000)

```


Correlation matrix small (no lags)
```{r  no lags}
corr_subset <- round(cor(temperature_nolags), 2)

ggcorrplot(corr_subset, outline.color = "white", tl.cex = 1, tl.srt = 90, lab_size = 30)
ggsave(file = "temp_var_correlation_plot_subset.jpg", dpi = 1000)

# Get the lower triangle
ggcorrplot(corr_subset,outline.col = "white", tl.cex = 7, tl.srt = 90)
ggsave(file = "temp_var_correlation_plot_lower_subset.jpg", dpi = 1000)
```

